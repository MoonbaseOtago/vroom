//
// RVOOM! Risc-V superscalar O-O
// Copyright (C) 2019-23 Paul Campbell - paul@taniwha.com
//
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
//

#include <stdio.h>
#include <stdlib.h>

int B;

int ffs(int x)
{
	int i;
	for (i = B-1;i >=0;i--)
	if (x&(1<<i))
		return i;
	return 99;
}

int popcount(int x)
{
	int count = 0;
	int i;
	for (i = 0;i<B;i++)
	if (x&(1<<i))
		count++;
	return count;
}

char tt[100];
char *bin(int v, int l)
{
	int i;
	char *cp=&tt[0];
	for (i = l-1; i >= 0; i--) 
		*cp++ = (v&(1<<i)?'1':'0');
	*cp = 0;
	return &tt[0];
}

int main(int argc, char ** argv)
{
	int i,j,k,t;

	if (argc < 2) {
		B = 8;
	} else {
		B = strtol((const char *)argv[1], 0, 0);
	}
	printf("//\n");
	printf("// RVOOM! Risc-V superscalar O-O\n");
	printf("// Copyright (C) 2019-23 Paul Campbell - paul@taniwha.com\n");
	printf("//\n");
	printf("// This program is free software: you can redistribute it and/or modify\n");
	printf("// it under the terms of the GNU General Public License as published by\n");
	printf("// the Free Software Foundation, either version 3 of the License, or\n");
	printf("// (at your option) any later version.\n");
	printf("//\n");
	printf("// This program is distributed in the hope that it will be useful,\n");
	printf("// but WITHOUT ANY WARRANTY; without even the implied warranty of\n");
	printf("// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n");
	printf("// GNU General Public License for more details.\n");
	printf("//\n");
	printf("// You should have received a copy of the GNU General Public License\n");
	printf("// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n");
	printf("//\n");

	printf("	always @(*)\n");
	printf("	casez ({r_op, r_addw, r_arith, r_right, sr2[5:0]}) // synthesis full_case parallel_case\n");
	printf("// sll \n");
	for (i = 0; i < B; i++) {
		printf("	12'b000_0?0_%s: c_res = {", bin(i, 6));
		for (j = 0; j < B; j++) {
			if (((B-1)-i-j) <0) {
				printf("1'b0%s", j == (B-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", (B-1)-i-j, j == (B-1)?"};\n":",");
			}
		}
	}
	printf("// srl\n");
	for (i = 0; i < B; i++) {
		printf("	12'b000_0?1_%s: c_res = {", bin(i, 6));
		for (j = 0; j < B; j++) {
			if (j < i) {
				printf("fill%s", j == (B-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", (B-1)+i-j, j == (B-1)?"};\n":",");
			}
		}
	}
	printf("// sll.w\n");
	for (i = 0; i < (B/2); i++) {
		printf("	12'b000_1?0_?%s: c_res = {", bin(i, 5));
		for (j = 0; j < (B/2); j++) 
			printf("r1[%d],", (B/2-1)-i);
		for (j = 0; j < (B/2); j++) {
			if (((B/2-1)-i-j) <0) {
				printf("1'b0%s", j == (B/2-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", (B/2-1)-i-j, j == (B/2-1)?"};\n":",");
			}
		}
	}
	printf("// srl.w\n");
	for (i = 0; i < (B/2); i++) {
		printf("	12'b000_1?1_?%s: c_res = {", bin(i, 5));
		if (i==0) {
			for (j = 0; j < (B/2);j++)
				printf("r1[31],");
		} else {
			for (j = 0; j < (B/2);j++)
				printf("fill32,");
		}
		for (j = 0; j < (B/2); j++) {
			if (j < i) {
				printf("fill32%s", j == (B/2-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", (B/2-1)+i-j, j == (B/2-1)?"};\n":",");
			}
		}
	}
	printf("`ifdef B\n");
	printf("// slo \n");
	for (i = 0; i < B; i++) {
		printf("	12'b001_000_%s: c_res = {", bin(i, 6));
		for (j = 0; j < B; j++) {
			if (((B-1)-i-j) <0) {
				printf("1'b1%s", j == (B-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", (B-1)-i-j, j == (B-1)?"};\n":",");
			}
		}
	}
	printf("// sro\n");
	for (i = 0; i < B; i++) {
		printf("	12'b001_001_%s: c_res = {", bin(i, 6));
		for (j = 0; j < B; j++) {
			if (j < i) {
				printf("1'b1%s", j == (B-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", (B-1)+i-j, j == (B-1)?"};\n":",");
			}
		}
	}
	printf("// slo.w\n");
	for (i = 0; i < (B/2); i++) {
		printf("	12'b000_100_?%s: c_res = {", bin(i, 5));
		for (j = 0; j < (B/2); j++) 
			printf("r1[%d],", (B/2-1)-i);
		for (j = 0; j < (B/2); j++) {
			if (((B/2-1)-i-j) <0) {
				printf("1'b1%s", j == (B/2-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", (B/2-1)-i-j, j == (B/2-1)?"};\n":",");
			}
		}
	}
	printf("// sro.w\n");
	for (i = 0; i < (B/2); i++) {
		printf("	12'b000_101_?%s: c_res = {", bin(i, 5));
		if (i==0) {
			for (j = 0; j < (B/2);j++)
				printf("r1[31],");
		} else {
			for (j = 0; j < (B/2);j++)
				printf("1'b1,");
		}
		for (j = 0; j < (B/2); j++) {
			if (j < i) {
				printf("1'b1%s", j == (B/2-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", (B/2-1)+i-j, j == (B/2-1)?"};\n":",");
			}
		}
	}
	printf("// rol \n");
	for (i = 0; i < B; i++) {
		printf("	12'b001_010_%s: c_res = {", bin(i, 6));
		for (j = 0; j < B; j++) {
			if (((B-1)-i-j) <0) {
				printf("r1[%d]%s", ((B-1)-i-j)&0x3f, j == (B-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", (B-1)-i-j, j == (B-1)?"};\n":",");
			}
		}
	}
	printf("// ror\n");
	for (i = 0; i < B; i++) {
		printf("	12'b001_011_%s: c_res = {", bin(i, 6));
		for (j = 0; j < B; j++) {
			if (j < i) {
				printf("r1[%d]%s", ((B-1)+i-j)&0x3f, j == (B-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", (B-1)+i-j, j == (B-1)?"};\n":",");
			}
		}
	}
	printf("// rol.w \n");
	for (i = 0; i < B/2; i++) {
		printf("	12'b001_110_?%s: c_res = {", bin(i, 5));
		for (j = 0; j < B/2; j++) 
			printf("r1[%d],", ((B/2)-i-1)&0x1f);
		for (j = 0; j < B/2; j++) {
			if (((B/2-1)-i-j) <0) {
				printf("r1[%d]%s", ((B/2-1)-i-j)&0x1f, j == (B/2-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", (B/2-1)-i-j, j == (B/2-1)?"};\n":",");
			}
		}
	}
	printf("// ror.w\n");
	for (i = 0; i < B/2; i++) {
		printf("	12'b001_111_?%s: c_res = {", bin(i, 5));
		for (j = 0; j < B/2; j++) 
			printf("r1[%d],", ((B/2)+i-1)&0x1f);
		for (j = 0; j < B/2; j++) {
			if (j < i) {
				printf("r1[%d]%s", ((B/2-1)+i-j)&0x1f, j == (B/2-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", (B/2-1)+i-j, j == (B/2-1)?"};\n":",");
			}
		}
	}

	printf("// orc \n");
	printf("	12'b010_000_??????: c_res = {");
	for (i = 7; i >= 0; i--) printf("{{8{|r1[%d:%d]}}}%s", 8*i+7,8*i, i==0?"};\n":",");

	printf("// rev8 \n");
	printf("	12'b010_001_??????: c_res = (rv32 ? {32'bx, r1[7:0], r1[15:8], r1[23:16], r1[31:24]}:\n");
	printf("	                                    {r1[7:0], r1[15:8], r1[23:16], r1[31:24], r1[39:32], r1[47:40], r1[55:48], r1[63:56]});\n");


	printf("// zip \n");
	printf("	12'b010_010_??????: c_res = {{32{r1[31]}},");
	for (i = 15; i >= 0; i--) printf("r1[%d], r1[%d]%s", 2*i+1, i, i==0?"};\n":",");
	printf("// unzip \n");
	printf("	12'b010_011_??????: c_res = {{32{r1[31]}},");
	for (i = 31; i >= 1; i-=2) printf("r1[%d],", i);
	for (i = 30; i >= 0; i-=2) printf("r1[%d]%s", i, i==0?"};\n":",");

#ifdef NOTDEF
	

	printf("// gorc.w \n");
	printf("	12'b010_000_??????: begin\n");
	printf("		reg [31:0]a1, a2, a3, a4;\n");
	printf("		a4 = (r2[4]? {");
	for (i = 1; i >= 0; i--)
		printf("r1[%d:%d]|r1[%d:%d]%s", 16*(i)+15, 16*(i),  16*(i^1)+15, 16*(i^1), i==0?"}:r1);\n":", ");
	printf("		a3 = (r2[3]? {");
	for (i = 3; i >= 0; i--)
		printf("a4[%d:%d]|a4[%d:%d]%s", 8*(i)+7, 8*(i), 8*(i^1)+7, 8*(i^1), i==0?"}:a4);\n":", ");
	printf("		a2 = (r2[2]? {");
	for (i = 7; i >= 0; i--)
		printf("a3[%d:%d]|a3[%d:%d]%s", 4*(i)+3, 4*(i), 4*(i^1)+3, 4*(i^1), i==0?"}:a3);\n":", ");
	printf("		a1 = (r2[1]? {");
	for (i = 15; i >= 0; i--)
		printf("a2[%d:%d]|a2[%d:%d]%s", 2*(i)+1, 2*(i), 2*(i^1)+1, 2*(i^1), i==0?"}:a2);\n":", ");
	printf("		c_res = (r2[0]? {{32{a1[30]}},");
	for (i = 31; i >= 0; i--)
		printf("a1[%d]|a1[%d]%s", i, (i^1), i==0?"}:{{32{a1[31]}}, a1});\n":", ");
	printf("		end\n");

	printf("// grev.w \n");
	printf("	12'b010_001_??????: begin\n");
	printf("		reg [31:0]a1, a2, a3, a4;\n");
	printf("		a4 = (r2[4]? {");
	for (i = 1; i >= 0; i--)
		printf("r1[%d:%d]%s", 16*(i^1)+15, 16*(i^1), i==0?"}:r1);\n":", ");
	printf("		a3 = (r2[3]? {");
	for (i = 3; i >= 0; i--)
		printf("a4[%d:%d]%s", 8*(i^1)+7, 8*(i^1), i==0?"}:a4);\n":", ");
	printf("		a2 = (r2[2]? {");
	for (i = 7; i >= 0; i--)
		printf("a3[%d:%d]%s", 4*(i^1)+3, 4*(i^1), i==0?"}:a3);\n":", ");
	printf("		a1 = (r2[1]? {");
	for (i = 15; i >= 0; i--)
		printf("a2[%d:%d]%s", 2*(i^1)+1, 2*(i^1), i==0?"}:a2);\n":", ");
	printf("		c_res = (r2[0]? {{32{a1[30]}},");
	for (i = 31; i >= 0; i--)
		printf("a1[%d]%s", (i^1), i==0?"}:{{32{a1[31]}},a1});\n":", ");
	printf("		end\n");



	printf("// shfl.w \n");
	printf("	12'b010_110_??????: begin\n");
	printf("		reg [31:0]a0, a1, a2;\n");
	printf("		a0 = (r2[0]? {");
	for (i = 7; i >= 0; i--)
		printf("r1[%d], r1[%d], r1[%d], r1[%d]%s", 4*i+3, 4*i+1, 4*i+2, 4*i+0, i==0?"}:r1);\n":", ");
	printf("		a1 = (r2[1]? {");
	for (i = 3; i >= 0; i--)
		printf("a0[%d:%d], a0[%d:%d], a0[%d:%d], a0[%d:%d]%s", 8*i+7, 8*i+6, 8*i+3, 8*i+2, 8*i+5, 8*i+4, 8*i+1, 8*i+0, i==0?"}:a0);\n":", ");
	printf("		a2 = (r2[2]? {");
	for (i = 1; i >= 0; i--)
		printf("a1[%d:%d], a1[%d:%d], a1[%d:%d], a1[%d:%d]%s", 16*i+15, 16*i+12, 16*i+7, 16*i+4, 16*i+11, 16*i+8, 16*i+3, 16*i+0, i==0?"}:a1);\n":", ");
	i = 0;
	printf("		c_res = {{32{a2[31]}}, (r2[3]? {");
		printf("a2[%d:%d], a2[%d:%d], a2[%d:%d], a2[%d:%d]%s", 32*i+31, 32*i+24, 32*i+15, 32*i+8, 32*i+23, 32*i+16, 32*i+7, 32*i+0, i==0?"}:a2)};\n":", ");
	printf("		end\n");

	printf("// unshfl.w \n");
	printf("	12'b010_111_??????: begin\n");
	printf("		reg [31:0]a1, a2, a3;\n");
	i = 0;
	printf("		a3 = (r2[3]? {");
		printf("r1[%d:%d], r1[%d:%d], r1[%d:%d], r1[%d:%d]%s", 32*i+31, 32*i+24, 8*i+15, 32*i+8, 32*i+23, 32*i+16, 32*i+7, 32*i+0, i==0?"}:r1);\n":", ");
	printf("		a2 = (r2[2]? {");
	for (i = 1; i >= 0; i--)
		printf("a3[%d:%d], a3[%d:%d], a3[%d:%d], a3[%d:%d]%s", 16*i+15, 16*i+12, 16*i+7, 16*i+4, 16*i+11, 16*i+8, 16*i+3, 16*i+0, i==0?"}:a3);\n":", ");
	printf("		a1 = (r2[1]? {");
	for (i = 3; i >= 0; i--)
		printf("a2[%d:%d], a2[%d:%d], a2[%d:%d], a2[%d:%d]%s", 8*i+7, 8*i+6, 8*i+3, 8*i+2, 8*i+5, 8*i+4, 8*i+1, 8*i+0, i==0?"}:a2);\n":", ");
	printf("		c_res = {{32{a1[31]}}, (r2[0]? {");
	for (i = 7; i >= 0; i--)
		printf("a1[%d], a1[%d], a1[%d], a1[%d]%s", 4*i+3, 4*i+1, 4*i+2, 4*i+0, i==0?"}:a1)};\n":", ");
	printf("		end\n");
#endif
	


	
	printf("// bclr \n");
	for (i = 0; i < B; i++) {
		printf("	12'b011_000_%s: c_res = {", bin(i, 6));
		for (j = 0; j < B; j++) {
			if ((B-1-j) == i) {
				printf("1'b0%s", j == (B-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", B-1-j, j == (B-1)?"};\n":",");
			}
		}
	}
	printf("// bset \n");
	for (i = 0; i < B; i++) {
		printf("	12'b011_001_%s: c_res = {", bin(i, 6));
		for (j = 0; j < B; j++) {
			if ((B-1-j) == i) {
				printf("1'b1%s", j == (B-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", B-1-j, j == (B-1)?"};\n":",");
			}
		}
	}
	printf("// binv \n");
	for (i = 0; i < B; i++) {
		printf("	12'b011_010_%s: c_res = {", bin(i, 6));
		for (j = 0; j < B; j++) {
			if ((B-1-j) == i) {
				printf("~r1[%d]%s", B-1-j, j == (B-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", B-1-j, j == (B-1)?"};\n":",");
			}
		}
	}
	printf("// bext \n");
	for (i = 0; i < B; i++) {
		printf("	12'b011_011_%s: c_res = {", bin(i, 6));
		printf("63'b0, r1[%d]};\n", i);
	}
	printf("// bclr.w \n");
	for (i = 0; i < B/2; i++) {
		printf("	12'b011_100_?%s: c_res = {r1[63:32],", bin(i, 5));
		for (j = 0; j < B/2; j++) {
			if ((B/2-1-j) == i) {
				printf("1'b0%s", j == (B/2-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", B/2-1-j, j == (B/2-1)?"};\n":",");
			}
		}
	}
	printf("// bset.w \n");
	for (i = 0; i < B/2; i++) {
		printf("	12'b011_101_?%s: c_res = {r1[63:32],", bin(i, 5));
		for (j = 0; j < B/2; j++) {
			if ((B/2-1-j) == i) {
				printf("1'b1%s", j == (B/2-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", B/2-1-j, j == (B/2-1)?"};\n":",");
			}
		}
	}
	printf("// binv.w \n");
	for (i = 0; i < B/2; i++) {
		printf("	12'b011_110_?%s: c_res = {r1[63:32],", bin(i, 5));
		for (j = 0; j < B/2; j++) {
			if ((B/2-1-j) == i) {
				printf("~r1[%d]%s", B/2-1-j, j == (B/2-1)?"};\n":",");
			} else {
				printf("r1[%d]%s", B/2-1-j, j == (B/2-1)?"};\n":",");
			}
		}
	}
	printf("// bext.w \n");
	for (i = 0; i < B/2; i++) {
		printf("	12'b011_111_?%s: c_res = {", bin(i, 5));
		printf("63'b0, r1[%d]};\n", i);
	}

	printf("// sllu.w\n");
	for (i = 0; i < (B); i++) {
		printf("	12'b100_100_?%s: c_res = {", bin(i, 5));
		if (i < (B/2)) 
			printf("%d'b0,", B/2-i);
		if (i < (B/2)) {
			printf("r1[31:0]%s",i==0?"};\n":",");
		} else {
			printf("r1[%d:0],", i < B/2?31:B-i-1);
		}
		if (i > 0)
			printf("%d'b0};\n",i);
	}
#ifdef NOTDEF
	printf("// bmatflip\n");
		printf("	12'b100_?01_??????: c_res = {r1[63], r1[55], r1[47], r1[39], r1[31], r1[23], r1[15], r1[7],\n");
		printf("				     r1[62], r1[54], r1[46], r1[38], r1[30], r1[22], r1[14], r1[6],\n");
		printf("				     r1[61], r1[53], r1[45], r1[37], r1[29], r1[21], r1[13], r1[5],\n");
		printf("				     r1[60], r1[52], r1[44], r1[36], r1[28], r1[20], r1[12], r1[4],\n");
		printf("				     r1[59], r1[51], r1[43], r1[35], r1[27], r1[19], r1[11], r1[3],\n");
		printf("				     r1[58], r1[50], r1[42], r1[34], r1[26], r1[18], r1[10], r1[2],\n");
		printf("				     r1[57], r1[49], r1[41], r1[33], r1[25], r1[17], r1[9], r1[1],\n");
		printf("				     r1[56], r1[48], r1[40], r1[32], r1[24], r1[16], r1[8], r1[0]};\n");
#endif
	printf("// sext.b\n");
		printf("	12'b100_?10_??????: c_res = {{56{r1[7]}}, r1[7:0]};\n");
	printf("// sext.h\n");
		printf("	12'b100_?11_??????: c_res = {{48{r1[15]}}, r1[15:0]};\n");

	printf("// xperm8\n");
	printf("	12'b101_?00_??????: begin : xperm8\n");
	printf("				reg[7:0]p[0:7];\n");
	for (i = 0; i < 8; i++) {
	printf("				p[%d] = r1[%d:%d];\n", i, 8*i+7, 8*i);
	}
	for (i = 0; i < 64; i+=8) {
	printf("				casez({rv32, r2[%d:%d]}) // synthesis full_case parallel_case\n", i+7, i);
	printf("				9'b1_0000_00??,\n");
	printf("  			    	9'b0_0000_0???: c_res[%d:%d] = p[r2[%d:%d]];\n", i+7, i, i+2, i);
	printf("  			    	default: c_res[%d:%d] = 8'b0;\n", i+7, i);
	printf("  			    	endcase\n");
	}
	printf("  			    end\n");
	printf("// xperm4\n");
	printf("	12'b101_?01_??????: begin : xperm4\n");
	printf("				reg[3:0]p[0:15];\n");
	for (i = 0; i < 16; i++) {
	printf("				p[%d] = r1[%d:%d];\n", i, 4*i+3, 4*i);
	}
	for (i = 0; i < 64; i+=4) {
	printf("				casez({rv32, r2[%d:%d]}) // synthesis full_case parallel_case\n", i+3, i);
	printf("				5'b1_0???,\n");
	printf("  			    	5'b0_????: c_res[%d:%d] = p[r2[%d:%d]];\n", i+3, i, i+3, i);
	printf("  			    	default: c_res[%d:%d] = 8'b0;\n", i+3, i);
	printf("  			    	endcase\n");
	}
	printf("  			    end\n");
#ifdef NOTDEF
	printf("// bmator\n");
	printf("	12'b101_?00_??????: c_res = {");
	printf("		(r1[56]&r2[7])|(r1[57]&r2[15])|(r1[58]&r2[23])|(r1[59]&r2[31])|(r1[60]&r2[39])|(r1[61]&r2[47])|(r1[62]&r2[55])|(r1[63]&r2[63]),\n");
	printf("		(r1[56]&r2[6])|(r1[57]&r2[14])|(r1[58]&r2[22])|(r1[59]&r2[30])|(r1[60]&r2[38])|(r1[61]&r2[46])|(r1[62]&r2[54])|(r1[63]&r2[62]),\n");
	printf("		(r1[56]&r2[5])|(r1[57]&r2[13])|(r1[58]&r2[21])|(r1[59]&r2[29])|(r1[60]&r2[37])|(r1[61]&r2[45])|(r1[62]&r2[53])|(r1[63]&r2[61]),\n");
	printf("		(r1[56]&r2[4])|(r1[57]&r2[12])|(r1[58]&r2[20])|(r1[59]&r2[28])|(r1[60]&r2[36])|(r1[61]&r2[44])|(r1[62]&r2[52])|(r1[63]&r2[60]),\n");
	printf("		(r1[56]&r2[3])|(r1[57]&r2[11])|(r1[58]&r2[19])|(r1[59]&r2[27])|(r1[60]&r2[35])|(r1[61]&r2[43])|(r1[62]&r2[51])|(r1[63]&r2[59]),\n");
	printf("		(r1[56]&r2[2])|(r1[57]&r2[10])|(r1[58]&r2[18])|(r1[59]&r2[26])|(r1[60]&r2[34])|(r1[61]&r2[42])|(r1[62]&r2[50])|(r1[63]&r2[58]),\n");
	printf("		(r1[56]&r2[1])|(r1[57]&r2[9])|(r1[58]&r2[17])|(r1[59]&r2[25])|(r1[60]&r2[33])|(r1[61]&r2[41])|(r1[62]&r2[49])|(r1[63]&r2[57]),\n");
	printf("		(r1[56]&r2[0])|(r1[57]&r2[8])|(r1[58]&r2[16])|(r1[59]&r2[24])|(r1[60]&r2[32])|(r1[61]&r2[40])|(r1[62]&r2[48])|(r1[63]&r2[56]),\n");
	printf("		(r1[48]&r2[7])|(r1[49]&r2[15])|(r1[50]&r2[23])|(r1[51]&r2[31])|(r1[52]&r2[39])|(r1[53]&r2[47])|(r1[54]&r2[55])|(r1[55]&r2[63]),\n");
	printf("		(r1[48]&r2[6])|(r1[49]&r2[14])|(r1[50]&r2[22])|(r1[51]&r2[30])|(r1[52]&r2[38])|(r1[53]&r2[46])|(r1[54]&r2[54])|(r1[55]&r2[62]),\n");
	printf("		(r1[48]&r2[5])|(r1[49]&r2[13])|(r1[50]&r2[21])|(r1[51]&r2[29])|(r1[52]&r2[37])|(r1[53]&r2[45])|(r1[54]&r2[53])|(r1[55]&r2[61]),\n");
	printf("		(r1[48]&r2[4])|(r1[49]&r2[12])|(r1[50]&r2[20])|(r1[51]&r2[28])|(r1[52]&r2[36])|(r1[53]&r2[44])|(r1[54]&r2[52])|(r1[55]&r2[60]),\n");
	printf("		(r1[48]&r2[3])|(r1[49]&r2[11])|(r1[50]&r2[19])|(r1[51]&r2[27])|(r1[52]&r2[35])|(r1[53]&r2[43])|(r1[54]&r2[51])|(r1[55]&r2[59]),\n");
	printf("		(r1[48]&r2[2])|(r1[49]&r2[10])|(r1[50]&r2[18])|(r1[51]&r2[26])|(r1[52]&r2[34])|(r1[53]&r2[42])|(r1[54]&r2[50])|(r1[55]&r2[58]),\n");
	printf("		(r1[48]&r2[1])|(r1[49]&r2[9])|(r1[50]&r2[17])|(r1[51]&r2[25])|(r1[52]&r2[33])|(r1[53]&r2[41])|(r1[54]&r2[49])|(r1[55]&r2[57]),\n");
	printf("		(r1[48]&r2[0])|(r1[49]&r2[8])|(r1[50]&r2[16])|(r1[51]&r2[24])|(r1[52]&r2[32])|(r1[53]&r2[40])|(r1[54]&r2[48])|(r1[55]&r2[56]),\n");
	printf("		(r1[40]&r2[7])|(r1[41]&r2[15])|(r1[42]&r2[23])|(r1[43]&r2[31])|(r1[44]&r2[39])|(r1[45]&r2[47])|(r1[46]&r2[55])|(r1[47]&r2[63]),\n");
	printf("		(r1[40]&r2[6])|(r1[41]&r2[14])|(r1[42]&r2[22])|(r1[43]&r2[30])|(r1[44]&r2[38])|(r1[45]&r2[46])|(r1[46]&r2[54])|(r1[47]&r2[62]),\n");
	printf("		(r1[40]&r2[5])|(r1[41]&r2[13])|(r1[42]&r2[21])|(r1[43]&r2[29])|(r1[44]&r2[37])|(r1[45]&r2[45])|(r1[46]&r2[53])|(r1[47]&r2[61]),\n");
	printf("		(r1[40]&r2[4])|(r1[41]&r2[12])|(r1[42]&r2[20])|(r1[43]&r2[28])|(r1[44]&r2[36])|(r1[45]&r2[44])|(r1[46]&r2[52])|(r1[47]&r2[60]),\n");
	printf("		(r1[40]&r2[3])|(r1[41]&r2[11])|(r1[42]&r2[19])|(r1[43]&r2[27])|(r1[44]&r2[35])|(r1[45]&r2[43])|(r1[46]&r2[51])|(r1[47]&r2[59]),\n");
	printf("		(r1[40]&r2[2])|(r1[41]&r2[10])|(r1[42]&r2[18])|(r1[43]&r2[26])|(r1[44]&r2[34])|(r1[45]&r2[42])|(r1[46]&r2[50])|(r1[47]&r2[58]),\n");
	printf("		(r1[40]&r2[1])|(r1[41]&r2[9])|(r1[42]&r2[17])|(r1[43]&r2[25])|(r1[44]&r2[33])|(r1[45]&r2[41])|(r1[46]&r2[49])|(r1[47]&r2[57]),\n");
	printf("		(r1[40]&r2[0])|(r1[41]&r2[8])|(r1[42]&r2[16])|(r1[43]&r2[24])|(r1[44]&r2[32])|(r1[45]&r2[40])|(r1[46]&r2[48])|(r1[47]&r2[56]),\n");
	printf("		(r1[32]&r2[7])|(r1[33]&r2[15])|(r1[34]&r2[23])|(r1[35]&r2[31])|(r1[36]&r2[39])|(r1[37]&r2[47])|(r1[38]&r2[55])|(r1[39]&r2[63]),\n");
	printf("		(r1[32]&r2[6])|(r1[33]&r2[14])|(r1[34]&r2[22])|(r1[35]&r2[30])|(r1[36]&r2[38])|(r1[37]&r2[46])|(r1[38]&r2[54])|(r1[39]&r2[62]),\n");
	printf("		(r1[32]&r2[5])|(r1[33]&r2[13])|(r1[34]&r2[21])|(r1[35]&r2[29])|(r1[36]&r2[37])|(r1[37]&r2[45])|(r1[38]&r2[53])|(r1[39]&r2[61]),\n");
	printf("		(r1[32]&r2[4])|(r1[33]&r2[12])|(r1[34]&r2[20])|(r1[35]&r2[28])|(r1[36]&r2[36])|(r1[37]&r2[44])|(r1[38]&r2[52])|(r1[39]&r2[60]),\n");
	printf("		(r1[32]&r2[3])|(r1[33]&r2[11])|(r1[34]&r2[19])|(r1[35]&r2[27])|(r1[36]&r2[35])|(r1[37]&r2[43])|(r1[38]&r2[51])|(r1[39]&r2[59]),\n");
	printf("		(r1[32]&r2[2])|(r1[33]&r2[10])|(r1[34]&r2[18])|(r1[35]&r2[26])|(r1[36]&r2[34])|(r1[37]&r2[42])|(r1[38]&r2[50])|(r1[39]&r2[58]),\n");
	printf("		(r1[32]&r2[1])|(r1[33]&r2[9])|(r1[34]&r2[17])|(r1[35]&r2[25])|(r1[36]&r2[33])|(r1[37]&r2[41])|(r1[38]&r2[49])|(r1[39]&r2[57]),\n");
	printf("		(r1[32]&r2[0])|(r1[33]&r2[8])|(r1[34]&r2[16])|(r1[35]&r2[24])|(r1[36]&r2[32])|(r1[37]&r2[40])|(r1[38]&r2[48])|(r1[39]&r2[56]),\n");
	printf("		(r1[24]&r2[7])|(r1[25]&r2[15])|(r1[26]&r2[23])|(r1[27]&r2[31])|(r1[28]&r2[39])|(r1[29]&r2[47])|(r1[30]&r2[55])|(r1[31]&r2[63]),\n");
	printf("		(r1[24]&r2[6])|(r1[25]&r2[14])|(r1[26]&r2[22])|(r1[27]&r2[30])|(r1[28]&r2[38])|(r1[29]&r2[46])|(r1[30]&r2[54])|(r1[31]&r2[62]),\n");
	printf("		(r1[24]&r2[5])|(r1[25]&r2[13])|(r1[26]&r2[21])|(r1[27]&r2[29])|(r1[28]&r2[37])|(r1[29]&r2[45])|(r1[30]&r2[53])|(r1[31]&r2[61]),\n");
	printf("		(r1[24]&r2[4])|(r1[25]&r2[12])|(r1[26]&r2[20])|(r1[27]&r2[28])|(r1[28]&r2[36])|(r1[29]&r2[44])|(r1[30]&r2[52])|(r1[31]&r2[60]),\n");
	printf("		(r1[24]&r2[3])|(r1[25]&r2[11])|(r1[26]&r2[19])|(r1[27]&r2[27])|(r1[28]&r2[35])|(r1[29]&r2[43])|(r1[30]&r2[51])|(r1[31]&r2[59]),\n");
	printf("		(r1[24]&r2[2])|(r1[25]&r2[10])|(r1[26]&r2[18])|(r1[27]&r2[26])|(r1[28]&r2[34])|(r1[29]&r2[42])|(r1[30]&r2[50])|(r1[31]&r2[58]),\n");
	printf("		(r1[24]&r2[1])|(r1[25]&r2[9])|(r1[26]&r2[17])|(r1[27]&r2[25])|(r1[28]&r2[33])|(r1[29]&r2[41])|(r1[30]&r2[49])|(r1[31]&r2[57]),\n");
	printf("		(r1[24]&r2[0])|(r1[25]&r2[8])|(r1[26]&r2[16])|(r1[27]&r2[24])|(r1[28]&r2[32])|(r1[29]&r2[40])|(r1[30]&r2[48])|(r1[31]&r2[56]),\n");
	printf("		(r1[16]&r2[7])|(r1[17]&r2[15])|(r1[18]&r2[23])|(r1[19]&r2[31])|(r1[20]&r2[39])|(r1[21]&r2[47])|(r1[22]&r2[55])|(r1[23]&r2[63]),\n");
	printf("		(r1[16]&r2[6])|(r1[17]&r2[14])|(r1[18]&r2[22])|(r1[19]&r2[30])|(r1[20]&r2[38])|(r1[21]&r2[46])|(r1[22]&r2[54])|(r1[23]&r2[62]),\n");
	printf("		(r1[16]&r2[5])|(r1[17]&r2[13])|(r1[18]&r2[21])|(r1[19]&r2[29])|(r1[20]&r2[37])|(r1[21]&r2[45])|(r1[22]&r2[53])|(r1[23]&r2[61]),\n");
	printf("		(r1[16]&r2[4])|(r1[17]&r2[12])|(r1[18]&r2[20])|(r1[19]&r2[28])|(r1[20]&r2[36])|(r1[21]&r2[44])|(r1[22]&r2[52])|(r1[23]&r2[60]),\n");
	printf("		(r1[16]&r2[3])|(r1[17]&r2[11])|(r1[18]&r2[19])|(r1[19]&r2[27])|(r1[20]&r2[35])|(r1[21]&r2[43])|(r1[22]&r2[51])|(r1[23]&r2[59]),\n");
	printf("		(r1[16]&r2[2])|(r1[17]&r2[10])|(r1[18]&r2[18])|(r1[19]&r2[26])|(r1[20]&r2[34])|(r1[21]&r2[42])|(r1[22]&r2[50])|(r1[23]&r2[58]),\n");
	printf("		(r1[16]&r2[1])|(r1[17]&r2[9])|(r1[18]&r2[17])|(r1[19]&r2[25])|(r1[20]&r2[33])|(r1[21]&r2[41])|(r1[22]&r2[49])|(r1[23]&r2[57]),\n");
	printf("		(r1[16]&r2[0])|(r1[17]&r2[8])|(r1[18]&r2[16])|(r1[19]&r2[24])|(r1[20]&r2[32])|(r1[21]&r2[40])|(r1[22]&r2[48])|(r1[23]&r2[56]),\n");
	printf("		(r1[8]&r2[7])|(r1[9]&r2[15])|(r1[10]&r2[23])|(r1[11]&r2[31])|(r1[12]&r2[39])|(r1[13]&r2[47])|(r1[14]&r2[55])|(r1[15]&r2[63]),\n");
	printf("		(r1[8]&r2[6])|(r1[9]&r2[14])|(r1[10]&r2[22])|(r1[11]&r2[30])|(r1[12]&r2[38])|(r1[13]&r2[46])|(r1[14]&r2[54])|(r1[15]&r2[62]),\n");
	printf("		(r1[8]&r2[5])|(r1[9]&r2[13])|(r1[10]&r2[21])|(r1[11]&r2[29])|(r1[12]&r2[37])|(r1[13]&r2[45])|(r1[14]&r2[53])|(r1[15]&r2[61]),\n");
	printf("		(r1[8]&r2[4])|(r1[9]&r2[12])|(r1[10]&r2[20])|(r1[11]&r2[28])|(r1[12]&r2[36])|(r1[13]&r2[44])|(r1[14]&r2[52])|(r1[15]&r2[60]),\n");
	printf("		(r1[8]&r2[3])|(r1[9]&r2[11])|(r1[10]&r2[19])|(r1[11]&r2[27])|(r1[12]&r2[35])|(r1[13]&r2[43])|(r1[14]&r2[51])|(r1[15]&r2[59]),\n");
	printf("		(r1[8]&r2[2])|(r1[9]&r2[10])|(r1[10]&r2[18])|(r1[11]&r2[26])|(r1[12]&r2[34])|(r1[13]&r2[42])|(r1[14]&r2[50])|(r1[15]&r2[58]),\n");
	printf("		(r1[8]&r2[1])|(r1[9]&r2[9])|(r1[10]&r2[17])|(r1[11]&r2[25])|(r1[12]&r2[33])|(r1[13]&r2[41])|(r1[14]&r2[49])|(r1[15]&r2[57]),\n");
	printf("		(r1[8]&r2[0])|(r1[9]&r2[8])|(r1[10]&r2[16])|(r1[11]&r2[24])|(r1[12]&r2[32])|(r1[13]&r2[40])|(r1[14]&r2[48])|(r1[15]&r2[56]),\n");
	printf("		(r1[0]&r2[7])|(r1[1]&r2[15])|(r1[2]&r2[23])|(r1[3]&r2[31])|(r1[4]&r2[39])|(r1[5]&r2[47])|(r1[6]&r2[55])|(r1[7]&r2[63]),\n");
	printf("		(r1[0]&r2[6])|(r1[1]&r2[14])|(r1[2]&r2[22])|(r1[3]&r2[30])|(r1[4]&r2[38])|(r1[5]&r2[46])|(r1[6]&r2[54])|(r1[7]&r2[62]),\n");
	printf("		(r1[0]&r2[5])|(r1[1]&r2[13])|(r1[2]&r2[21])|(r1[3]&r2[29])|(r1[4]&r2[37])|(r1[5]&r2[45])|(r1[6]&r2[53])|(r1[7]&r2[61]),\n");
	printf("		(r1[0]&r2[4])|(r1[1]&r2[12])|(r1[2]&r2[20])|(r1[3]&r2[28])|(r1[4]&r2[36])|(r1[5]&r2[44])|(r1[6]&r2[52])|(r1[7]&r2[60]),\n");
	printf("		(r1[0]&r2[3])|(r1[1]&r2[11])|(r1[2]&r2[19])|(r1[3]&r2[27])|(r1[4]&r2[35])|(r1[5]&r2[43])|(r1[6]&r2[51])|(r1[7]&r2[59]),\n");
	printf("		(r1[0]&r2[2])|(r1[1]&r2[10])|(r1[2]&r2[18])|(r1[3]&r2[26])|(r1[4]&r2[34])|(r1[5]&r2[42])|(r1[6]&r2[50])|(r1[7]&r2[58]),\n");
	printf("		(r1[0]&r2[1])|(r1[1]&r2[9])|(r1[2]&r2[17])|(r1[3]&r2[25])|(r1[4]&r2[33])|(r1[5]&r2[41])|(r1[6]&r2[49])|(r1[7]&r2[57]),\n");
	printf("		(r1[0]&r2[0])|(r1[1]&r2[8])|(r1[2]&r2[16])|(r1[3]&r2[24])|(r1[4]&r2[32])|(r1[5]&r2[40])|(r1[6]&r2[48])|(r1[7]&r2[56])};\n");
	printf("// bmatxor\n");
	printf("	12'b101_?01_??????: c_res = {\n");
	printf("		(r1[56]&r2[7])^(r1[57]&r2[15])^(r1[58]&r2[23])^(r1[59]&r2[31])^(r1[60]&r2[39])^(r1[61]&r2[47])^(r1[62]&r2[55])^(r1[63]&r2[63]),\n");
	printf("		(r1[56]&r2[6])^(r1[57]&r2[14])^(r1[58]&r2[22])^(r1[59]&r2[30])^(r1[60]&r2[38])^(r1[61]&r2[46])^(r1[62]&r2[54])^(r1[63]&r2[62]),\n");
	printf("		(r1[56]&r2[5])^(r1[57]&r2[13])^(r1[58]&r2[21])^(r1[59]&r2[29])^(r1[60]&r2[37])^(r1[61]&r2[45])^(r1[62]&r2[53])^(r1[63]&r2[61]),\n");
	printf("		(r1[56]&r2[4])^(r1[57]&r2[12])^(r1[58]&r2[20])^(r1[59]&r2[28])^(r1[60]&r2[36])^(r1[61]&r2[44])^(r1[62]&r2[52])^(r1[63]&r2[60]),\n");
	printf("		(r1[56]&r2[3])^(r1[57]&r2[11])^(r1[58]&r2[19])^(r1[59]&r2[27])^(r1[60]&r2[35])^(r1[61]&r2[43])^(r1[62]&r2[51])^(r1[63]&r2[59]),\n");
	printf("		(r1[56]&r2[2])^(r1[57]&r2[10])^(r1[58]&r2[18])^(r1[59]&r2[26])^(r1[60]&r2[34])^(r1[61]&r2[42])^(r1[62]&r2[50])^(r1[63]&r2[58]),\n");
	printf("		(r1[56]&r2[1])^(r1[57]&r2[9])^(r1[58]&r2[17])^(r1[59]&r2[25])^(r1[60]&r2[33])^(r1[61]&r2[41])^(r1[62]&r2[49])^(r1[63]&r2[57]),\n");
	printf("		(r1[56]&r2[0])^(r1[57]&r2[8])^(r1[58]&r2[16])^(r1[59]&r2[24])^(r1[60]&r2[32])^(r1[61]&r2[40])^(r1[62]&r2[48])^(r1[63]&r2[56]),\n");
	printf("		(r1[48]&r2[7])^(r1[49]&r2[15])^(r1[50]&r2[23])^(r1[51]&r2[31])^(r1[52]&r2[39])^(r1[53]&r2[47])^(r1[54]&r2[55])^(r1[55]&r2[63]),\n");
	printf("		(r1[48]&r2[6])^(r1[49]&r2[14])^(r1[50]&r2[22])^(r1[51]&r2[30])^(r1[52]&r2[38])^(r1[53]&r2[46])^(r1[54]&r2[54])^(r1[55]&r2[62]),\n");
	printf("		(r1[48]&r2[5])^(r1[49]&r2[13])^(r1[50]&r2[21])^(r1[51]&r2[29])^(r1[52]&r2[37])^(r1[53]&r2[45])^(r1[54]&r2[53])^(r1[55]&r2[61]),\n");
	printf("		(r1[48]&r2[4])^(r1[49]&r2[12])^(r1[50]&r2[20])^(r1[51]&r2[28])^(r1[52]&r2[36])^(r1[53]&r2[44])^(r1[54]&r2[52])^(r1[55]&r2[60]),\n");
	printf("		(r1[48]&r2[3])^(r1[49]&r2[11])^(r1[50]&r2[19])^(r1[51]&r2[27])^(r1[52]&r2[35])^(r1[53]&r2[43])^(r1[54]&r2[51])^(r1[55]&r2[59]),\n");
	printf("		(r1[48]&r2[2])^(r1[49]&r2[10])^(r1[50]&r2[18])^(r1[51]&r2[26])^(r1[52]&r2[34])^(r1[53]&r2[42])^(r1[54]&r2[50])^(r1[55]&r2[58]),\n");
	printf("		(r1[48]&r2[1])^(r1[49]&r2[9])^(r1[50]&r2[17])^(r1[51]&r2[25])^(r1[52]&r2[33])^(r1[53]&r2[41])^(r1[54]&r2[49])^(r1[55]&r2[57]),\n");
	printf("		(r1[48]&r2[0])^(r1[49]&r2[8])^(r1[50]&r2[16])^(r1[51]&r2[24])^(r1[52]&r2[32])^(r1[53]&r2[40])^(r1[54]&r2[48])^(r1[55]&r2[56]),\n");
	printf("		(r1[40]&r2[7])^(r1[41]&r2[15])^(r1[42]&r2[23])^(r1[43]&r2[31])^(r1[44]&r2[39])^(r1[45]&r2[47])^(r1[46]&r2[55])^(r1[47]&r2[63]),\n");
	printf("		(r1[40]&r2[6])^(r1[41]&r2[14])^(r1[42]&r2[22])^(r1[43]&r2[30])^(r1[44]&r2[38])^(r1[45]&r2[46])^(r1[46]&r2[54])^(r1[47]&r2[62]),\n");
	printf("		(r1[40]&r2[5])^(r1[41]&r2[13])^(r1[42]&r2[21])^(r1[43]&r2[29])^(r1[44]&r2[37])^(r1[45]&r2[45])^(r1[46]&r2[53])^(r1[47]&r2[61]),\n");
	printf("		(r1[40]&r2[4])^(r1[41]&r2[12])^(r1[42]&r2[20])^(r1[43]&r2[28])^(r1[44]&r2[36])^(r1[45]&r2[44])^(r1[46]&r2[52])^(r1[47]&r2[60]),\n");
	printf("		(r1[40]&r2[3])^(r1[41]&r2[11])^(r1[42]&r2[19])^(r1[43]&r2[27])^(r1[44]&r2[35])^(r1[45]&r2[43])^(r1[46]&r2[51])^(r1[47]&r2[59]),\n");
	printf("		(r1[40]&r2[2])^(r1[41]&r2[10])^(r1[42]&r2[18])^(r1[43]&r2[26])^(r1[44]&r2[34])^(r1[45]&r2[42])^(r1[46]&r2[50])^(r1[47]&r2[58]),\n");
	printf("		(r1[40]&r2[1])^(r1[41]&r2[9])^(r1[42]&r2[17])^(r1[43]&r2[25])^(r1[44]&r2[33])^(r1[45]&r2[41])^(r1[46]&r2[49])^(r1[47]&r2[57]),\n");
	printf("		(r1[40]&r2[0])^(r1[41]&r2[8])^(r1[42]&r2[16])^(r1[43]&r2[24])^(r1[44]&r2[32])^(r1[45]&r2[40])^(r1[46]&r2[48])^(r1[47]&r2[56]),\n");
	printf("		(r1[32]&r2[7])^(r1[33]&r2[15])^(r1[34]&r2[23])^(r1[35]&r2[31])^(r1[36]&r2[39])^(r1[37]&r2[47])^(r1[38]&r2[55])^(r1[39]&r2[63]),\n");
	printf("		(r1[32]&r2[6])^(r1[33]&r2[14])^(r1[34]&r2[22])^(r1[35]&r2[30])^(r1[36]&r2[38])^(r1[37]&r2[46])^(r1[38]&r2[54])^(r1[39]&r2[62]),\n");
	printf("		(r1[32]&r2[5])^(r1[33]&r2[13])^(r1[34]&r2[21])^(r1[35]&r2[29])^(r1[36]&r2[37])^(r1[37]&r2[45])^(r1[38]&r2[53])^(r1[39]&r2[61]),\n");
	printf("		(r1[32]&r2[4])^(r1[33]&r2[12])^(r1[34]&r2[20])^(r1[35]&r2[28])^(r1[36]&r2[36])^(r1[37]&r2[44])^(r1[38]&r2[52])^(r1[39]&r2[60]),\n");
	printf("		(r1[32]&r2[3])^(r1[33]&r2[11])^(r1[34]&r2[19])^(r1[35]&r2[27])^(r1[36]&r2[35])^(r1[37]&r2[43])^(r1[38]&r2[51])^(r1[39]&r2[59]),\n");
	printf("		(r1[32]&r2[2])^(r1[33]&r2[10])^(r1[34]&r2[18])^(r1[35]&r2[26])^(r1[36]&r2[34])^(r1[37]&r2[42])^(r1[38]&r2[50])^(r1[39]&r2[58]),\n");
	printf("		(r1[32]&r2[1])^(r1[33]&r2[9])^(r1[34]&r2[17])^(r1[35]&r2[25])^(r1[36]&r2[33])^(r1[37]&r2[41])^(r1[38]&r2[49])^(r1[39]&r2[57]),\n");
	printf("		(r1[32]&r2[0])^(r1[33]&r2[8])^(r1[34]&r2[16])^(r1[35]&r2[24])^(r1[36]&r2[32])^(r1[37]&r2[40])^(r1[38]&r2[48])^(r1[39]&r2[56]),\n");
	printf("		(r1[24]&r2[7])^(r1[25]&r2[15])^(r1[26]&r2[23])^(r1[27]&r2[31])^(r1[28]&r2[39])^(r1[29]&r2[47])^(r1[30]&r2[55])^(r1[31]&r2[63]),\n");
	printf("		(r1[24]&r2[6])^(r1[25]&r2[14])^(r1[26]&r2[22])^(r1[27]&r2[30])^(r1[28]&r2[38])^(r1[29]&r2[46])^(r1[30]&r2[54])^(r1[31]&r2[62]),\n");
	printf("		(r1[24]&r2[5])^(r1[25]&r2[13])^(r1[26]&r2[21])^(r1[27]&r2[29])^(r1[28]&r2[37])^(r1[29]&r2[45])^(r1[30]&r2[53])^(r1[31]&r2[61]),\n");
	printf("		(r1[24]&r2[4])^(r1[25]&r2[12])^(r1[26]&r2[20])^(r1[27]&r2[28])^(r1[28]&r2[36])^(r1[29]&r2[44])^(r1[30]&r2[52])^(r1[31]&r2[60]),\n");
	printf("		(r1[24]&r2[3])^(r1[25]&r2[11])^(r1[26]&r2[19])^(r1[27]&r2[27])^(r1[28]&r2[35])^(r1[29]&r2[43])^(r1[30]&r2[51])^(r1[31]&r2[59]),\n");
	printf("		(r1[24]&r2[2])^(r1[25]&r2[10])^(r1[26]&r2[18])^(r1[27]&r2[26])^(r1[28]&r2[34])^(r1[29]&r2[42])^(r1[30]&r2[50])^(r1[31]&r2[58]),\n");
	printf("		(r1[24]&r2[1])^(r1[25]&r2[9])^(r1[26]&r2[17])^(r1[27]&r2[25])^(r1[28]&r2[33])^(r1[29]&r2[41])^(r1[30]&r2[49])^(r1[31]&r2[57]),\n");
	printf("		(r1[24]&r2[0])^(r1[25]&r2[8])^(r1[26]&r2[16])^(r1[27]&r2[24])^(r1[28]&r2[32])^(r1[29]&r2[40])^(r1[30]&r2[48])^(r1[31]&r2[56]),\n");
	printf("		(r1[16]&r2[7])^(r1[17]&r2[15])^(r1[18]&r2[23])^(r1[19]&r2[31])^(r1[20]&r2[39])^(r1[21]&r2[47])^(r1[22]&r2[55])^(r1[23]&r2[63]),\n");
	printf("		(r1[16]&r2[6])^(r1[17]&r2[14])^(r1[18]&r2[22])^(r1[19]&r2[30])^(r1[20]&r2[38])^(r1[21]&r2[46])^(r1[22]&r2[54])^(r1[23]&r2[62]),\n");
	printf("		(r1[16]&r2[5])^(r1[17]&r2[13])^(r1[18]&r2[21])^(r1[19]&r2[29])^(r1[20]&r2[37])^(r1[21]&r2[45])^(r1[22]&r2[53])^(r1[23]&r2[61]),\n");
	printf("		(r1[16]&r2[4])^(r1[17]&r2[12])^(r1[18]&r2[20])^(r1[19]&r2[28])^(r1[20]&r2[36])^(r1[21]&r2[44])^(r1[22]&r2[52])^(r1[23]&r2[60]),\n");
	printf("		(r1[16]&r2[3])^(r1[17]&r2[11])^(r1[18]&r2[19])^(r1[19]&r2[27])^(r1[20]&r2[35])^(r1[21]&r2[43])^(r1[22]&r2[51])^(r1[23]&r2[59]),\n");
	printf("		(r1[16]&r2[2])^(r1[17]&r2[10])^(r1[18]&r2[18])^(r1[19]&r2[26])^(r1[20]&r2[34])^(r1[21]&r2[42])^(r1[22]&r2[50])^(r1[23]&r2[58]),\n");
	printf("		(r1[16]&r2[1])^(r1[17]&r2[9])^(r1[18]&r2[17])^(r1[19]&r2[25])^(r1[20]&r2[33])^(r1[21]&r2[41])^(r1[22]&r2[49])^(r1[23]&r2[57]),\n");
	printf("		(r1[16]&r2[0])^(r1[17]&r2[8])^(r1[18]&r2[16])^(r1[19]&r2[24])^(r1[20]&r2[32])^(r1[21]&r2[40])^(r1[22]&r2[48])^(r1[23]&r2[56]),\n");
	printf("		(r1[8]&r2[7])^(r1[9]&r2[15])^(r1[10]&r2[23])^(r1[11]&r2[31])^(r1[12]&r2[39])^(r1[13]&r2[47])^(r1[14]&r2[55])^(r1[15]&r2[63]),\n");
	printf("		(r1[8]&r2[6])^(r1[9]&r2[14])^(r1[10]&r2[22])^(r1[11]&r2[30])^(r1[12]&r2[38])^(r1[13]&r2[46])^(r1[14]&r2[54])^(r1[15]&r2[62]),\n");
	printf("		(r1[8]&r2[5])^(r1[9]&r2[13])^(r1[10]&r2[21])^(r1[11]&r2[29])^(r1[12]&r2[37])^(r1[13]&r2[45])^(r1[14]&r2[53])^(r1[15]&r2[61]),\n");
	printf("		(r1[8]&r2[4])^(r1[9]&r2[12])^(r1[10]&r2[20])^(r1[11]&r2[28])^(r1[12]&r2[36])^(r1[13]&r2[44])^(r1[14]&r2[52])^(r1[15]&r2[60]),\n");
	printf("		(r1[8]&r2[3])^(r1[9]&r2[11])^(r1[10]&r2[19])^(r1[11]&r2[27])^(r1[12]&r2[35])^(r1[13]&r2[43])^(r1[14]&r2[51])^(r1[15]&r2[59]),\n");
	printf("		(r1[8]&r2[2])^(r1[9]&r2[10])^(r1[10]&r2[18])^(r1[11]&r2[26])^(r1[12]&r2[34])^(r1[13]&r2[42])^(r1[14]&r2[50])^(r1[15]&r2[58]),\n");
	printf("		(r1[8]&r2[1])^(r1[9]&r2[9])^(r1[10]&r2[17])^(r1[11]&r2[25])^(r1[12]&r2[33])^(r1[13]&r2[41])^(r1[14]&r2[49])^(r1[15]&r2[57]),\n");
	printf("		(r1[8]&r2[0])^(r1[9]&r2[8])^(r1[10]&r2[16])^(r1[11]&r2[24])^(r1[12]&r2[32])^(r1[13]&r2[40])^(r1[14]&r2[48])^(r1[15]&r2[56]),\n");
	printf("		(r1[0]&r2[7])^(r1[1]&r2[15])^(r1[2]&r2[23])^(r1[3]&r2[31])^(r1[4]&r2[39])^(r1[5]&r2[47])^(r1[6]&r2[55])^(r1[7]&r2[63]),\n");
	printf("		(r1[0]&r2[6])^(r1[1]&r2[14])^(r1[2]&r2[22])^(r1[3]&r2[30])^(r1[4]&r2[38])^(r1[5]&r2[46])^(r1[6]&r2[54])^(r1[7]&r2[62]),\n");
	printf("		(r1[0]&r2[5])^(r1[1]&r2[13])^(r1[2]&r2[21])^(r1[3]&r2[29])^(r1[4]&r2[37])^(r1[5]&r2[45])^(r1[6]&r2[53])^(r1[7]&r2[61]),\n");
	printf("		(r1[0]&r2[4])^(r1[1]&r2[12])^(r1[2]&r2[20])^(r1[3]&r2[28])^(r1[4]&r2[36])^(r1[5]&r2[44])^(r1[6]&r2[52])^(r1[7]&r2[60]),\n");
	printf("		(r1[0]&r2[3])^(r1[1]&r2[11])^(r1[2]&r2[19])^(r1[3]&r2[27])^(r1[4]&r2[35])^(r1[5]&r2[43])^(r1[6]&r2[51])^(r1[7]&r2[59]),\n");
	printf("		(r1[0]&r2[2])^(r1[1]&r2[10])^(r1[2]&r2[18])^(r1[3]&r2[26])^(r1[4]&r2[34])^(r1[5]&r2[42])^(r1[6]&r2[50])^(r1[7]&r2[58]),\n");
	printf("		(r1[0]&r2[1])^(r1[1]&r2[9])^(r1[2]&r2[17])^(r1[3]&r2[25])^(r1[4]&r2[33])^(r1[5]&r2[41])^(r1[6]&r2[49])^(r1[7]&r2[57]),\n");
	printf("		(r1[0]&r2[0])^(r1[1]&r2[8])^(r1[2]&r2[16])^(r1[3]&r2[24])^(r1[4]&r2[32])^(r1[5]&r2[40])^(r1[6]&r2[48])^(r1[7]&r2[56])};\n");

	printf("// bfp/bfpw\n");
	printf("	12'b101_?10_??????:	if (rv32|r_addw) begin\n");
	printf("					reg [15:0]mask;\n");
	printf("					reg [31:0]maskl;\n");
	printf("					reg [31:0]datal;\n");
	printf("					reg [31:0]res;\n");
	printf("					case (r2[27:24])\n");
	printf("					0: mask = 16'hffff;\n");
	for (i = 1; i < 16; i++)
	printf("					%d: mask = 16'h%x;\n", i, (unsigned)((1<<i)-1));
	printf("					endcase\n");
	printf("					case (r2[20:16])\n");
	printf("					0: begin maskl = {16'b0, mask}; datal = {16'bx, r2[15:0]}; end\n");
	for (i = 1; i < 16; i++)				
	printf("					%d: begin maskl = {%d'b0, mask, %d'b0}; datal = {%d'bx, r2[15:0], %d'bx}; end\n", i, 16-i, i, 16-i, i);
	for (i = 16; i < 32; i++)				
	printf("					%d: begin maskl = {mask[%d:0], %d'b0}; datal = {r2[%d:0], %d'bx}; end\n", i, 31-i, i, 31-i, i);
	printf("					endcase\n");
	printf("					res = (mask&datal)|(~mask&r1);\n");
	printf("					c_res = {{32{res[31]}}, res};\n");
	printf("				end else begin\n");
	printf("					reg [31:0]mask;\n");
	printf("					reg [63:0]maskl;\n");
	printf("					reg [63:0]datal;\n");
	printf("					reg [63:0]res;\n");
	printf("					reg [5:0]off;\n");
	printf("					reg [4:0]w;\n");
	printf("					w = (r2[63:62]==2'b10 ?r2[60:56]:r2[44:40]);\n");
	printf("					off = (r2[63:62]==2'b10 ?r2[53:48]:r2[37:32]);\n");
	printf("					case (w)\n");
	printf("					0: mask = 32'hffff_ffff;\n");
	for (i = 1; i < 32; i++)
	printf("					%d: mask = 32'h%x;\n", i, (unsigned)((1<<i)-1));
	printf("					endcase\n");
	printf("					case (off)\n");
	printf("					0: begin maskl = {32'b0, mask}; datal = {32'bx, r2[31:0]}; end\n");
	for (i = 1; i < 32; i++)				
	printf("					%d: begin maskl = {%d'b0, mask, %d'b0}; datal = {%d'bx, r2[31:0], %d'bx}; end\n", i, 32-i, i, 32-i, i);
	for (i = 32; i < 64; i++)				
	printf("					%d: begin maskl = {mask[%d:0], %d'b0}; datal = {r2[%d:0], %d'bx}; end\n", i, 63-i, i, 63-i, i);
	printf("					endcase\n");
	printf("					c_res = (mask&datal)|(~mask&r1);\n");
	printf("				end\n");


#endif

	printf("// brev8\n");
	printf("	12'b110_?01_??????: c_res = {\n");
	for (i = 56; i >= 0; i-=8) {
		for (j = 0; j < 8; j++) printf("r1[%d]%s", i+j, i==0&&j==7?"};\n":",");
	}
	printf("// zext.h / pack\n");
	printf("	12'b110_?10_??????: c_res = (r_addw|rv32?{{32{r2[15]}}, r2[15:0], r1[15:0]}:{r2[31:0], r1[31:0]});\n");
	printf("// packh\n");
	printf("	12'b110_?11_??????: c_res = {48'b0, r2[7:0], r1[7:0]};\n");

#ifdef NOTDEF

	// 
	// 	bdep/bext are not single cycle instructions, for the moment we will emulate
	//
	printf("// bdep\n");
	//printf("	12'b110_000_??????: c_res = {");
	printf("// bdepw\n");
	//printf("	12'b110_100_??????: c_res = {");
	printf("// bext\n");
	//printf("	12'b110_001_??????: c_res = {");
	printf("// bextw\n");
	//printf("	12'b110_101_??????: c_res = {");

	printf("// fsl\n");
	printf("	12'b111_000_000000: c_res = r1;\n");
	for (i = 1; i < 64; i++) 
	printf("	12'b111_000_%s: c_res = {r1[%d:0],r2[63:%d]};\n",bin(i, 6), 63-i, 64-i);
	printf("// fslw\n");
	printf("	12'b111_100_?00000: c_res = {{32{r1[31]}},r1[31:0]};\n");
	for (i = 1; i < 32; i++) 
	printf("	12'b111_100_?%s: c_res = {{32{r1[%d]}},r1[%d:0],r2[63:%d]};\n",bin(i, 5), 31-i, 31-i, 32-i);
	printf("// fsr\n");
	printf("	12'b111_001_000000: c_res = r1;\n");
	for (i = 1; i < 64; i++) 
	printf("	12'b111_001_%s: c_res = {r2[%d:0],r1[63:%d]};\n",bin(i, 6), i-1, i);
	printf("// fsrw\n");
	printf("	12'b111_101_?00000: c_res = {{32{r1[31]}},r1[31:0]};\n");
	for (i = 1; i < 32; i++) 
	printf("	12'b111_101_?%s: c_res = {{32{r2[%d]}}, r2[%d:0],r1[31:%d]};\n",bin(i, 5), i-1, i-1, i);
	printf("// cmix\n");
	printf("	12'b111_?10_??????: c_res = (r1&r2)|(r3&~r2);\n");
	printf("// cmov\n");
	printf("	12'b111_?11_??????: c_res = ((rv32 ?(r2[31:0]!=0):(r2!=0))?r1:r3);\n");
#endif
	printf("`endif\n");
	printf("	endcase \n");
}
